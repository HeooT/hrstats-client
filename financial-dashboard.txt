              <div className="text-gray-700">당사</div>
              <div className="text-2xl font-bold text-gray-900">{formatNumber(efficiencyIndicators.capitalProductivityPerEmployee)}원</div>
            </div>
            <div className="mt-2 flex justify-between items-center">
              <div className="text-gray-700">산업 평균</div>
              <div className="text-xl font-medium text-gray-600">{formatNumber(industryData.efficiencyIndicators.capitalProductivityPerEmployee)}원</div>
            </div>
            
            <div className="mt-4">
              <div className="h-4 bg-gray-200 rounded-full overflow-hidden">
                <div 
                  className={`h-full ${
                    efficiencyIndicators.capitalProductivityPerEmployee >= industryData.efficiencyIndicators.capitalProductivityPerEmployee
                      ? 'bg-green-500'
                      : 'bg-yellow-500'
                  }`} 
                  style={{ 
                    width: `${Math.min(Math.max(
                      (efficiencyIndicators.capitalProductivityPerEmployee / Math.max(
                        efficiencyIndicators.capitalProductivityPerEmployee, 
                        industryData.efficiencyIndicators.capitalProductivityPerEmployee
                      )) * 100, 
                      10), 100)}%` 
                  }}
                ></div>
              </div>
            </div>
            
            <p className="mt-4 text-gray-600">
              {efficiencyIndicators.capitalProductivityPerEmployee >= industryData.efficiencyIndicators.capitalProductivityPerEmployee
                ? '인당 자본생산성이 산업 평균보다 높습니다. 자산 활용도가 높으며 투자 대비 효율성이 우수합니다.'
                : '인당 자본생산성이 산업 평균보다 낮습니다. 자산 활용도 개선과 효율적인 투자가 필요합니다.'}
            </p>
          </div>
        </div>
      </div>
      
      <div className="border rounded-lg overflow-hidden shadow-sm">
        <div className="bg-gray-50 px-4 py-2 border-b">
          <h3 className="text-lg font-medium text-gray-900">효율성 지표 연도별 추이</h3>
        </div>
        <div className="p-4">
          {/* 연도별 추이 차트를 여기에 구현할 수 있습니다 */}
          <div className="border rounded p-4 text-center text-gray-500">
                  {formatNumber(industryData.efficiencyIndicators.revenuePerEmployee)}원
                </td>
                <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                  {formatNumber(analysisData.financialAnalysis.efficiencyIndicators.revenuePerEmployee - industryData.efficiencyIndicators.revenuePerEmployee)}원
                </td>
                <td className="px-6 py-4 whitespace-nowrap text-sm font-medium">
                  <span className={`px-2 py-1 rounded-full text-xs ${
                    analysisData.financialAnalysis.efficiencyIndicators.revenuePerEmployee >= industryData.efficiencyIndicators.revenuePerEmployee
                      ? 'bg-green-100 text-green-800'
                      : 'bg-yellow-100 text-yellow-800'
                  }`}>
                    {analysisData.financialAnalysis.efficiencyIndicators.revenuePerEmployee >= industryData.efficiencyIndicators.revenuePerEmployee ? '양호' : '개선 필요'}
                  </span>
                </td>
              </tr>
              <tr>
                <td className="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">
                  인당 영업이익
                </td>
                <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                  {formatNumber(analysisData.financialAnalysis.efficiencyIndicators.operatingProfitPerEmployee)}원
                </td>
                <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                  {formatNumber(industryData.efficiencyIndicators.operatingProfitPerEmployee)}원
                </td>
                <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                  {formatNumber(analysisData.financialAnalysis.efficiencyIndicators.operatingProfitPerEmployee - industryData.efficiencyIndicators.operatingProfitPerEmployee)}원
                </td>
                <td className="px-6 py-4 whitespace-nowrap text-sm font-medium">
                  <span className={`px-2 py-1 rounded-full text-xs ${
                    analysisData.financialAnalysis.efficiencyIndicators.operatingProfitPerEmployee >= industryData.efficiencyIndicators.operatingProfitPerEmployee
                      ? 'bg-green-100 text-green-800'
                      : 'bg-yellow-100 text-yellow-800'
                  }`}>
                    {analysisData.financialAnalysis.efficiencyIndicators.operatingProfitPerEmployee >= industryData.efficiencyIndicators.operatingProfitPerEmployee ? '양호' : '개선 필요'}
                  </span>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      
      <div className="border rounded-lg overflow-hidden shadow-sm">
        <div className="bg-gray-50 px-4 py-2 border-b">
          <h3 className="text-lg font-medium text-gray-900">산업 비교 요약</h3>
        </div>
        <div className="p-4">
          <div className="p-4 bg-blue-50 rounded-lg">
            <h4 className="text-lg font-medium text-blue-900">종합 분석</h4>
            <p className="mt-2 text-blue-700">
              귀사의 재무 및 HR 지표를 산업 평균과 비교한 결과, 다음과 같은 특징이 나타납니다:
            </p>
            <ul className="mt-2 space-y-2 text-blue-700 list-disc pl-5">
              <li>
                <strong>강점:</strong> {
                  [
                    analysisData.financialAnalysis.growthIndicators.revenueGrowthRate >= industryData.growthIndicators.revenueGrowthRate && '매출액 증가율',
                    analysisData.financialAnalysis.profitabilityIndicators.operatingProfitToRevenueRatio >= industryData.profitabilityIndicators.operatingProfitToRevenueRatio && '영업이익률',
                    analysisData.financialAnalysis.hrIndicators.hcroi >= industryData.hrIndicators.hcroi && 'HCROI',
                    analysisData.financialAnalysis.efficiencyIndicators.revenuePerEmployee >= industryData.efficiencyIndicators.revenuePerEmployee && '인당 매출액'
                  ].filter(Boolean).join(', ') || '주요 강점 파악 필요'
                }
              </li>
              <li>
                <strong>개선 필요:</strong> {
                  [
                    analysisData.financialAnalysis.growthIndicators.revenueGrowthRate < industryData.growthIndicators.revenueGrowthRate && '매출액 증가율',
                    analysisData.financialAnalysis.profitabilityIndicators.operatingProfitToRevenueRatio < industryData.profitabilityIndicators.operatingProfitToRevenueRatio && '영업이익률',
                    analysisData.financialAnalysis.hrIndicators.hcroi < industryData.hrIndicators.hcroi && 'HCROI',
                    analysisData.financialAnalysis.efficiencyIndicators.revenuePerEmployee < industryData.efficiencyIndicators.revenuePerEmployee && '인당 매출액'
                  ].filter(Boolean).join(', ') || '주요 개선점 파악 필요'
                }
              </li>
            </ul>
          </div>
          
          <div className="mt-4">
            <h4 className="font-medium text-gray-900">HR 관점에서의 시사점</h4>
            <p className="mt-2 text-gray-600">
              {
                (analysisData.financialAnalysis.hrIndicators.laborIncomeShareRate <= industryData.hrIndicators.laborIncomeShareRate &&
                analysisData.financialAnalysis.hrIndicators.hcroi >= industryData.hrIndicators.hcroi)
                ? '귀사는 HR 지표에서 전반적으로 산업 평균보다 우수한 성과를 보이고 있습니다. 인적자원 투자 대비 수익성이 높고, 부가가치 대비 인건비 비중이 적정 수준으로 관리되고 있습니다. 현재의 HR 운영 방식을 지속하면서, 우수 인재 유지와 조직문화 강화에 집중하는 것이 좋습니다.'
                : (analysisData.financialAnalysis.hrIndicators.laborIncomeShareRate > industryData.hrIndicators.laborIncomeShareRate)
                ? '귀사는 노동소득분배율이 산업 평균보다 높아 부가가치 대비 인건비 부담이 큰 상황입니다. 인건비 구조를 최적화하고 부가가치 창출을 높이기 위한 HR 전략이 필요합니다. 직무 재설계와 성과 중심의 보상체계를 도입하는 것을 고려하세요.'
                : '귀사는 HCROI가 산업 평균보다 낮아 인적자원 투자 대비 수익성 개선이 필요합니다. 인력 생산성을 높이고 핵심 역량 중심의 인력 배치를 통해 투자 효율성을 개선하세요.'
              }
            </p>
          </div>
        </div>
      </div>
    </div>
  );
};

// 전략 추천 탭 컴포넌트
const RecommendationTab = ({ recommendations }) => {
  // 우선순위별 색상 설정
  const priorityColors = {
    '높음': 'bg-red-100 text-red-800 border-red-200',
    '중간': 'bg-yellow-100 text-yellow-800 border-yellow-200',
    '낮음': 'bg-blue-100 text-blue-800 border-blue-200'
  };
  
  return (
    <div className="space-y-6">
      <div className="p-4 bg-green-50 border border-green-200 rounded-lg">
        <h3 className="text-lg font-medium text-green-900">AI 기반 HR 전략 추천</h3>
        <p className="mt-2 text-green-700">
          재무 데이터 분석 결과를 바탕으로, 귀사의 HR 전략 수립을 위한 맞춤형 제안을 제공합니다. 
          각 제안은 분석된 데이터 패턴과 산업 내 성공 사례를 바탕으로 자동 생성되었습니다.
        </p>
      </div>
      
      <div className="grid grid-cols-1 gap-6">
        {recommendations.map((recommendation, index) => (
          <div 
            key={index} 
            className={`border rounded-lg overflow-hidden shadow-sm ${priorityColors[recommendation.priority].split(' ')[0]} bg-opacity-10`}
          >
            <div className={`px-4 py-2 border-b ${priorityColors[recommendation.priority]}`}>
              <div className="flex justify-between items-center">
                <h3 className="text-lg font-medium">{recommendation.category}</h3>
                <span className={`px-3 py-1 rounded-full text-xs font-bold ${priorityColors[recommendation.priority]}`}>
                  {recommendation.priority} 우선순위
                </span>
              </div>
            </div>
            <div className="p-4">
              <div className="mb-4">
                <h4 className="font-medium text-gray-900">핵심 이슈</h4>
                <p className="mt-1 text-gray-700">{recommendation.issue}</p>
              </div>
              
              <div className="mb-4">
                <h4 className="font-medium text-gray-900">추천 전략</h4>
                <p className="mt-1 text-gray-700">{recommendation.recommendation}</p>
              </div>
              
              <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                  <h4 className="font-medium text-gray-900">기대 효과</h4>
                  <p className="mt-1 text-gray-700">{recommendation.impact}</p>
                </div>
                
                <div>
                  <h4 className="font-medium text-gray-900">실행 계획</h4>
                  <p className="mt-1 text-gray-700">{recommendation.implementationPlan}</p>
                </div>
              </div>
            </div>
          </div>
        ))}
      </div>
      
      <div className="border rounded-lg overflow-hidden shadow-sm">
        <div className="bg-gray-50 px-4 py-2 border-b">
          <h3 className="text-lg font-medium text-gray-900">전략적 실행 로드맵</h3>
        </div>
        <div className="p-4">
          <div className="flex space-x-4">
            <div className="flex-1 border rounded-lg p-4">
              <h4 className="font-medium text-gray-900 mb-2">단기 실행 과제 (1~3개월)</h4>
              <ul className="space-y-2 text-gray-600 list-disc pl-5">
                {recommendations
                  .filter(rec => rec.priority === '높음')
                  .map((rec, index) => (
                    <li key={index}>{rec.recommendation}</li>
                  ))}
              </ul>
            </div>
            
            <div className="flex-1 border rounded-lg p-4">
              <h4 className="font-medium text-gray-900 mb-2">중기 실행 과제 (3~6개월)</h4>
              <ul className="space-y-2 text-gray-600 list-disc pl-5">
                {recommendations
                  .filter(rec => rec.priority === '중간')
                  .map((rec, index) => (
                    <li key={index}>{rec.recommendation}</li>
                  ))}
              </ul>
            </div>
            
            <div className="flex-1 border rounded-lg p-4">
              <h4 className="font-medium text-gray-900 mb-2">장기 실행 과제 (6~12개월)</h4>
              <ul className="space-y-2 text-gray-600 list-disc pl-5">
                {recommendations
                  .filter(rec => rec.priority === '낮음')
                  .map((rec, index) => (
                    <li key={index}>{rec.recommendation}</li>
                  ))}
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
};

export default FinancialAnalysisDashboard;
            효율성 지표 연도별 추이 차트가 여기에 표시됩니다.
          </div>
        </div>
      </div>
      
      <div className="border rounded-lg overflow-hidden shadow-sm">
        <div className="bg-gray-50 px-4 py-2 border-b">
          <h3 className="text-lg font-medium text-gray-900">효율성 관련 인사이트</h3>
        </div>
        <div className="p-4">
          <div className="p-4 bg-blue-50 rounded-lg">
            <h4 className="text-lg font-medium text-blue-900">효율성 분석</h4>
            <p className="mt-2 text-blue-700">
              {(efficiencyIndicators.revenuePerEmployee >= industryData.efficiencyIndicators.revenuePerEmployee &&
                efficiencyIndicators.operatingProfitPerEmployee >= industryData.efficiencyIndicators.operatingProfitPerEmployee)
                ? '귀사의 효율성 지표는 인당 매출액과 인당 영업이익 모두 산업 평균을 상회하고 있습니다. 이는 효율적인 인력 운영과 높은 생산성을 갖춘 조직 문화를 보여줍니다.'
                : (efficiencyIndicators.revenuePerEmployee >= industryData.efficiencyIndicators.revenuePerEmployee)
                ? '귀사의 인당 매출액은 산업 평균을 상회하지만, 인당 영업이익은 산업 평균보다 낮습니다. 매출은 효율적으로 창출하고 있으나 비용 관리에 개선이 필요합니다.'
                : (efficiencyIndicators.operatingProfitPerEmployee >= industryData.efficiencyIndicators.operatingProfitPerEmployee)
                ? '귀사의 인당 영업이익은 산업 평균을 상회하지만, 인당 매출액은 산업 평균보다 낮습니다. 매출 규모는 작지만 효율적인 비용 관리를 통해 높은 수익성을 유지하고 있습니다.'
                : '귀사의 효율성 지표는 인당 매출액과 인당 영업이익 모두 산업 평균보다 낮습니다. 인력 생산성 향상과 비용 구조 개선을 위한 전략이 시급합니다.'}
            </p>
          </div>
          
          <div className="mt-4">
            <h4 className="font-medium text-gray-900">HR 관점에서의 시사점</h4>
            <p className="mt-2 text-gray-600">
              {(efficiencyIndicators.revenuePerEmployee >= industryData.efficiencyIndicators.revenuePerEmployee &&
                efficiencyIndicators.operatingProfitPerEmployee >= industryData.efficiencyIndicators.operatingProfitPerEmployee)
                ? '우수한 효율성을 지속적으로 유지하기 위해 핵심 인재를 유지하고 성과 중심의 보상체계를 강화하세요. 고성과자에 대한 인센티브와 직원 역량 개발 프로그램에 투자하는 것이 중요합니다.'
                : '인력 효율성 개선을 위해 직무 재설계와 성과 중심 조직 문화를 도입하세요. 저성과 영역을 식별하고 핵심 역량 중심으로 인력을 재배치하는 것이 필요합니다.'}
            </p>
          </div>
        </div>
      </div>
    </div>
  );
};

// HR 지표 탭 컴포넌트
const HRIndexTab = ({ analysisData, industryData, year }) => {
  const { hrIndicators } = analysisData.financialAnalysis;
  
  return (
    <div className="space-y-6">
      <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div className="border rounded-lg overflow-hidden shadow-sm">
          <div className="bg-gray-50 px-4 py-2 border-b">
            <h3 className="text-lg font-medium text-gray-900">노동소득분배율</h3>
          </div>
          <div className="p-4">
            <div className="flex justify-between items-center">
              <div className="text-gray-700">당사</div>
              <div className="text-2xl font-bold text-gray-900">{hrIndicators.laborIncomeShareRate}%</div>
            </div>
            <div className="mt-2 flex justify-between items-center">
              <div className="text-gray-700">산업 평균</div>
              <div className="text-xl font-medium text-gray-600">{industryData.hrIndicators.laborIncomeShareRate}%</div>
            </div>
            
            <div className="mt-4">
              <div className="h-4 bg-gray-200 rounded-full overflow-hidden">
                <div 
                  className={`h-full ${
                    hrIndicators.laborIncomeShareRate <= industryData.hrIndicators.laborIncomeShareRate
                      ? 'bg-green-500'
                      : 'bg-yellow-500'
                  }`} 
                  style={{ 
                    width: `${Math.min(Math.max(
                      (industryData.hrIndicators.laborIncomeShareRate / Math.max(
                        hrIndicators.laborIncomeShareRate, 
                        industryData.hrIndicators.laborIncomeShareRate
                      )) * 100, 
                      10), 100)}%` 
                  }}
                ></div>
              </div>
            </div>
            
            <p className="mt-4 text-gray-600">
              {hrIndicators.laborIncomeShareRate <= industryData.hrIndicators.laborIncomeShareRate
                ? '노동소득분배율이 산업 평균보다 낮습니다. 부가가치 대비 인건비 비중이 효율적으로 관리되고 있습니다.'
                : '노동소득분배율이 산업 평균보다 높습니다. 부가가치 대비 인건비 비중이 높아 수익성에 부담이 될 수 있습니다.'}
            </p>
          </div>
        </div>
        
        <div className="border rounded-lg overflow-hidden shadow-sm">
          <div className="bg-gray-50 px-4 py-2 border-b">
            <h3 className="text-lg font-medium text-gray-900">HCROI (Human Capital ROI)</h3>
          </div>
          <div className="p-4">
            <div className="flex justify-between items-center">
              <div className="text-gray-700">당사</div>
              <div className="text-2xl font-bold text-gray-900">{hrIndicators.hcroi.toFixed(2)}</div>
            </div>
            <div className="mt-2 flex justify-between items-center">
              <div className="text-gray-700">산업 평균</div>
              <div className="text-xl font-medium text-gray-600">{industryData.hrIndicators.hcroi.toFixed(2)}</div>
            </div>
            
            <div className="mt-4">
              <div className="h-4 bg-gray-200 rounded-full overflow-hidden">
                <div 
                  className={`h-full ${
                    hrIndicators.hcroi >= industryData.hrIndicators.hcroi
                      ? 'bg-green-500'
                      : 'bg-yellow-500'
                  }`} 
                  style={{ 
                    width: `${Math.min(Math.max(
                      (hrIndicators.hcroi / Math.max(
                        hrIndicators.hcroi, 
                        industryData.hrIndicators.hcroi
                      )) * 100, 
                      10), 100)}%` 
                  }}
                ></div>
              </div>
            </div>
            
            <p className="mt-4 text-gray-600">
              {hrIndicators.hcroi >= industryData.hrIndicators.hcroi
                ? 'HCROI가 산업 평균보다 높습니다. 인적자원에 대한 투자 대비 수익성이 우수함을 의미합니다.'
                : 'HCROI가 산업 평균보다 낮습니다. 인적자원 투자 대비 수익성 개선이 필요합니다.'}
            </p>
          </div>
        </div>
      </div>
      
      <div className="border rounded-lg overflow-hidden shadow-sm">
        <div className="bg-gray-50 px-4 py-2 border-b">
          <h3 className="text-lg font-medium text-gray-900">HR 지표 연도별 추이</h3>
        </div>
        <div className="p-4">
          {/* 연도별 추이 차트를 여기에 구현할 수 있습니다 */}
          <div className="border rounded p-4 text-center text-gray-500">
            HR 지표 연도별 추이 차트가 여기에 표시됩니다.
          </div>
        </div>
      </div>
      
      <div className="border rounded-lg overflow-hidden shadow-sm">
        <div className="bg-gray-50 px-4 py-2 border-b">
          <h3 className="text-lg font-medium text-gray-900">HR 지표 관련 인사이트</h3>
        </div>
        <div className="p-4">
          <div className="p-4 bg-blue-50 rounded-lg">
            <h4 className="text-lg font-medium text-blue-900">HR 지표 분석</h4>
            <p className="mt-2 text-blue-700">
              {hrIndicators.laborIncomeShareRate <= industryData.hrIndicators.laborIncomeShareRate &&
               hrIndicators.hcroi >= industryData.hrIndicators.hcroi
                ? '귀사의 HR 지표는 노동소득분배율이 낮고 HCROI가 높아 산업 평균 대비 매우 효율적인 인적자원 관리가 이루어지고 있습니다. 이는 인적자원 투자 대비 높은 수익을 창출하고 있음을 의미합니다.'
                : hrIndicators.laborIncomeShareRate <= industryData.hrIndicators.laborIncomeShareRate
                ? '귀사의 노동소득분배율은 산업 평균보다 낮지만, HCROI는 산업 평균보다 낮습니다. 인건비는 효율적으로 관리되고 있으나, 인적자원 투자 대비 수익성 개선이 필요합니다.'
                : hrIndicators.hcroi >= industryData.hrIndicators.hcroi
                ? '귀사의 HCROI는 산업 평균보다 높지만, 노동소득분배율은 산업 평균보다 높습니다. 인적자원 투자 대비 수익성은 우수하지만, 전체 부가가치에서 인건비가 차지하는 비중이 높은 상황입니다.'
                : '귀사의 HR 지표는 노동소득분배율이 높고 HCROI가 낮아 산업 평균 대비 인적자원 관리의 효율성이 떨어집니다. 인건비 구조 최적화와 인적자원 생산성 향상을 위한 전략이 필요합니다.'}
            </p>
          </div>
          
          <div className="mt-4">
            <h4 className="font-medium text-gray-900">HR 전략 시사점</h4>
            <p className="mt-2 text-gray-600">
              {hrIndicators.laborIncomeShareRate <= industryData.hrIndicators.laborIncomeShareRate &&
               hrIndicators.hcroi >= industryData.hrIndicators.hcroi
                ? '현재의 효율적인 인적자원 관리를 지속하면서, 핵심 인재 유지와 역량 강화에 집중하세요. 고성과 직원에 대한 차별화된 보상과 경력 개발 기회를 제공하여 지속적인 생산성 향상을 도모하세요.'
                : hrIndicators.laborIncomeShareRate > industryData.hrIndicators.laborIncomeShareRate
                ? '인건비 구조를 최적화하기 위해 직무 재설계와 인력 배치 최적화를 진행하세요. 저부가가치 업무는 자동화하거나 아웃소싱을 검토하고, 성과 중심의 보상체계를 도입하여 생산성을 높이세요.'
                : 'HCROI를 개선하기 위해 인적자원 투자의 효율성을 높이세요. 핵심 역량 중심의 교육 프로그램을 강화하고, 성과 관리 체계를 개선하여 투자 대비 수익률을 높이는 방향으로 HR 전략을 수립하세요.'}
            </p>
          </div>
        </div>
      </div>
    </div>
  );
};

// 산업 비교 탭 컴포넌트
const IndustryComparisonTab = ({ analysisData, industryData, year }) => {
  return (
    <div className="space-y-6">
      <div className="border rounded-lg overflow-hidden">
        <div className="bg-gray-50 px-4 py-2 border-b">
          <h3 className="text-lg font-medium text-gray-900">산업 평균과의 비교</h3>
        </div>
        <div className="p-4">
          <table className="min-w-full divide-y divide-gray-200">
            <thead className="bg-gray-50">
              <tr>
                <th scope="col" className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                  지표
                </th>
                <th scope="col" className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                  당사
                </th>
                <th scope="col" className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                  산업 평균
                </th>
                <th scope="col" className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                  차이
                </th>
                <th scope="col" className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                  평가
                </th>
              </tr>
            </thead>
            <tbody className="bg-white divide-y divide-gray-200">
              {/* 성장성 지표 */}
              <tr className="bg-gray-50">
                <td colSpan="5" className="px-6 py-2 text-sm font-medium text-gray-900">
                  성장성 지표
                </td>
              </tr>
              <tr>
                <td className="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">
                  매출액 증가율
                </td>
                <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                  {analysisData.financialAnalysis.growthIndicators.revenueGrowthRate}%
                </td>
                <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                  {industryData.growthIndicators.revenueGrowthRate}%
                </td>
                <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                  {(analysisData.financialAnalysis.growthIndicators.revenueGrowthRate - industryData.growthIndicators.revenueGrowthRate).toFixed(2)}%
                </td>
                <td className="px-6 py-4 whitespace-nowrap text-sm font-medium">
                  <span className={`px-2 py-1 rounded-full text-xs ${
                    analysisData.financialAnalysis.growthIndicators.revenueGrowthRate >= industryData.growthIndicators.revenueGrowthRate
                      ? 'bg-green-100 text-green-800'
                      : 'bg-yellow-100 text-yellow-800'
                  }`}>
                    {analysisData.financialAnalysis.growthIndicators.revenueGrowthRate >= industryData.growthIndicators.revenueGrowthRate ? '양호' : '개선 필요'}
                  </span>
                </td>
              </tr>
              <tr>
                <td className="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">
                  총자산 증가율
                </td>
                <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                  {analysisData.financialAnalysis.growthIndicators.assetGrowthRate}%
                </td>
                <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                  {industryData.growthIndicators.assetGrowthRate}%
                </td>
                <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                  {(analysisData.financialAnalysis.growthIndicators.assetGrowthRate - industryData.growthIndicators.assetGrowthRate).toFixed(2)}%
                </td>
                <td className="px-6 py-4 whitespace-nowrap text-sm font-medium">
                  <span className={`px-2 py-1 rounded-full text-xs ${
                    analysisData.financialAnalysis.growthIndicators.assetGrowthRate >= industryData.growthIndicators.assetGrowthRate
                      ? 'bg-green-100 text-green-800'
                      : 'bg-yellow-100 text-yellow-800'
                  }`}>
                    {analysisData.financialAnalysis.growthIndicators.assetGrowthRate >= industryData.growthIndicators.assetGrowthRate ? '양호' : '개선 필요'}
                  </span>
                </td>
              </tr>
              
              {/* 수익성 지표 */}
              <tr className="bg-gray-50">
                <td colSpan="5" className="px-6 py-2 text-sm font-medium text-gray-900">
                  수익성 지표
                </td>
              </tr>
              <tr>
                <td className="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">
                  영업이익 증가율
                </td>
                <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                  {analysisData.financialAnalysis.profitabilityIndicators.operatingProfitGrowthRate}%
                </td>
                <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                  {industryData.profitabilityIndicators.operatingProfitGrowthRate}%
                </td>
                <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                  {(analysisData.financialAnalysis.profitabilityIndicators.operatingProfitGrowthRate - industryData.profitabilityIndicators.operatingProfitGrowthRate).toFixed(2)}%
                </td>
                <td className="px-6 py-4 whitespace-nowrap text-sm font-medium">
                  <span className={`px-2 py-1 rounded-full text-xs ${
                    analysisData.financialAnalysis.profitabilityIndicators.operatingProfitGrowthRate >= industryData.profitabilityIndicators.operatingProfitGrowthRate
                      ? 'bg-green-100 text-green-800'
                      : 'bg-yellow-100 text-yellow-800'
                  }`}>
                    {analysisData.financialAnalysis.profitabilityIndicators.operatingProfitGrowthRate >= industryData.profitabilityIndicators.operatingProfitGrowthRate ? '양호' : '개선 필요'}
                  </span>
                </td>
              </tr>
              <tr>
                <td className="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">
                  영업이익률
                </td>
                <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                  {analysisData.financialAnalysis.profitabilityIndicators.operatingProfitToRevenueRatio}%
                </td>
                <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                  {industryData.profitabilityIndicators.operatingProfitToRevenueRatio}%
                </td>
                <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                  {(analysisData.financialAnalysis.profitabilityIndicators.operatingProfitToRevenueRatio - industryData.profitabilityIndicators.operatingProfitToRevenueRatio).toFixed(2)}%
                </td>
                <td className="px-6 py-4 whitespace-nowrap text-sm font-medium">
                  <span className={`px-2 py-1 rounded-full text-xs ${
                    analysisData.financialAnalysis.profitabilityIndicators.operatingProfitToRevenueRatio >= industryData.profitabilityIndicators.operatingProfitToRevenueRatio
                      ? 'bg-green-100 text-green-800'
                      : 'bg-yellow-100 text-yellow-800'
                  }`}>
                    {analysisData.financialAnalysis.profitabilityIndicators.operatingProfitToRevenueRatio >= industryData.profitabilityIndicators.operatingProfitToRevenueRatio ? '양호' : '개선 필요'}
                  </span>
                </td>
              </tr>
              
              {/* HR 지표 */}
              <tr className="bg-gray-50">
                <td colSpan="5" className="px-6 py-2 text-sm font-medium text-gray-900">
                  HR 지표
                </td>
              </tr>
              <tr>
                <td className="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">
                  노동소득분배율
                </td>
                <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                  {analysisData.financialAnalysis.hrIndicators.laborIncomeShareRate}%
                </td>
                <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                  {industryData.hrIndicators.laborIncomeShareRate}%
                </td>
                <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                  {(analysisData.financialAnalysis.hrIndicators.laborIncomeShareRate - industryData.hrIndicators.laborIncomeShareRate).toFixed(2)}%
                </td>
                <td className="px-6 py-4 whitespace-nowrap text-sm font-medium">
                  <span className={`px-2 py-1 rounded-full text-xs ${
                    analysisData.financialAnalysis.hrIndicators.laborIncomeShareRate <= industryData.hrIndicators.laborIncomeShareRate
                      ? 'bg-green-100 text-green-800'
                      : 'bg-yellow-100 text-yellow-800'
                  }`}>
                    {analysisData.financialAnalysis.hrIndicators.laborIncomeShareRate <= industryData.hrIndicators.laborIncomeShareRate ? '효율적' : '검토 필요'}
                  </span>
                </td>
              </tr>
              <tr>
                <td className="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">
                  HCROI
                </td>
                <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                  {analysisData.financialAnalysis.hrIndicators.hcroi.toFixed(2)}
                </td>
                <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                  {industryData.hrIndicators.hcroi.toFixed(2)}
                </td>
                <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                  {(analysisData.financialAnalysis.hrIndicators.hcroi - industryData.hrIndicators.hcroi).toFixed(2)}
                </td>
                <td className="px-6 py-4 whitespace-nowrap text-sm font-medium">
                  <span className={`px-2 py-1 rounded-full text-xs ${
                    analysisData.financialAnalysis.hrIndicators.hcroi >= industryData.hrIndicators.hcroi
                      ? 'bg-green-100 text-green-800'
                      : 'bg-yellow-100 text-yellow-800'
                  }`}>
                    {analysisData.financialAnalysis.hrIndicators.hcroi >= industryData.hrIndicators.hcroi ? '효율적' : '검토 필요'}
                  </span>
                </td>
              </tr>
              
              {/* 효율성 지표 */}
              <tr className="bg-gray-50">
                <td colSpan="5" className="px-6 py-2 text-sm font-medium text-gray-900">
                  효율성 지표
                </td>
              </tr>
              <tr>
                <td className="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">
                  인당 매출액
                </td>
                <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                  {formatNumber(analysisData.financialAnalysis.efficiencyIndicators.revenuePerEmployee)}원
                </td>
                <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-산업 평균을 상회하지만, 총자산 증가율은 산업 평균보다 낮습니다. 매출 성장에 맞춰 적절한 자산 투자를 검토할 필요가 있습니다.'
                : growthIndicators.assetGrowthRate >= industryData.growthIndicators.assetGrowthRate
                ? '귀사의 총자산 증가율은 산업 평균을 상회하지만, 매출액 증가율은 산업 평균보다 낮습니다. 자산 투자 대비 매출 성장을 높이기 위한 전략이 필요합니다.'
                : '귀사의 성장성 지표는 매출액 증가율과 총자산 증가율 모두 산업 평균보다 낮습니다. 성장을 가속화하기 위한 전략적 접근이 필요합니다.'}
            </p>
          </div>
          
          <div className="mt-4">
            <h4 className="font-medium text-gray-900">HR 관점에서의 시사점</h4>
            <p className="mt-2 text-gray-600">
              {growthIndicators.revenueGrowthRate >= industryData.growthIndicators.revenueGrowthRate
                ? '매출 성장에 따라 적절한 인력 확보 및 역량 강화 전략이 필요합니다. 성장 분야에 필요한 핵심 인재를 확보하고 기존 인력의 역량을 개발하는 데 투자하세요.'
                : '매출 성장률을 높이기 위해 영업 및 마케팅 인력의 역량 강화와 성과 중심의 보상체계를 검토하세요. 핵심 성장 동력이 될 수 있는 부서에 인적 자원을 집중하는 것이 중요합니다.'}
            </p>
          </div>
        </div>
      </div>
    </div>
  );
};

// 수익성 탭 컴포넌트
const ProfitabilityTab = ({ analysisData, industryData, year }) => {
  const { profitabilityIndicators } = analysisData.financialAnalysis;
  
  return (
    <div className="space-y-6">
      <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div className="border rounded-lg overflow-hidden shadow-sm">
          <div className="bg-gray-50 px-4 py-2 border-b">
            <h3 className="text-lg font-medium text-gray-900">영업이익 증가율</h3>
          </div>
          <div className="p-4">
            <div className="flex justify-between items-center">
              <div className="text-gray-700">당사</div>
              <div className="text-2xl font-bold text-gray-900">{profitabilityIndicators.operatingProfitGrowthRate}%</div>
            </div>
            <div className="mt-2 flex justify-between items-center">
              <div className="text-gray-700">산업 평균</div>
              <div className="text-xl font-medium text-gray-600">{industryData.profitabilityIndicators.operatingProfitGrowthRate}%</div>
            </div>
            
            <div className="mt-4">
              <div className="h-4 bg-gray-200 rounded-full overflow-hidden">
                <div 
                  className={`h-full ${
                    profitabilityIndicators.operatingProfitGrowthRate >= industryData.profitabilityIndicators.operatingProfitGrowthRate
                      ? 'bg-green-500'
                      : 'bg-yellow-500'
                  }`} 
                  style={{ 
                    width: `${Math.min(Math.max(
                      (profitabilityIndicators.operatingProfitGrowthRate / Math.max(
                        profitabilityIndicators.operatingProfitGrowthRate, 
                        industryData.profitabilityIndicators.operatingProfitGrowthRate
                      )) * 100, 
                      10), 100)}%` 
                  }}
                ></div>
              </div>
            </div>
            
            <p className="mt-4 text-gray-600">
              {profitabilityIndicators.operatingProfitGrowthRate >= industryData.profitabilityIndicators.operatingProfitGrowthRate
                ? '영업이익 증가율이 산업 평균보다 높습니다. 기업의 수익성이 개선되고 있으며 비용 효율성이 높아지고 있음을 의미합니다.'
                : '영업이익 증가율이 산업 평균보다 낮습니다. 비용 구조와 운영 효율성을 검토할 필요가 있습니다.'}
            </p>
          </div>
        </div>
        
        <div className="border rounded-lg overflow-hidden shadow-sm">
          <div className="bg-gray-50 px-4 py-2 border-b">
            <h3 className="text-lg font-medium text-gray-900">영업이익률</h3>
          </div>
          <div className="p-4">
            <div className="flex justify-between items-center">
              <div className="text-gray-700">당사</div>
              <div className="text-2xl font-bold text-gray-900">{profitabilityIndicators.operatingProfitToRevenueRatio}%</div>
            </div>
            <div className="mt-2 flex justify-between items-center">
              <div className="text-gray-700">산업 평균</div>
              <div className="text-xl font-medium text-gray-600">{industryData.profitabilityIndicators.operatingProfitToRevenueRatio}%</div>
            </div>
            
            <div className="mt-4">
              <div className="h-4 bg-gray-200 rounded-full overflow-hidden">
                <div 
                  className={`h-full ${
                    profitabilityIndicators.operatingProfitToRevenueRatio >= industryData.profitabilityIndicators.operatingProfitToRevenueRatio
                      ? 'bg-green-500'
                      : 'bg-yellow-500'
                  }`} 
                  style={{ 
                    width: `${Math.min(Math.max(
                      (profitabilityIndicators.operatingProfitToRevenueRatio / Math.max(
                        profitabilityIndicators.operatingProfitToRevenueRatio, 
                        industryData.profitabilityIndicators.operatingProfitToRevenueRatio
                      )) * 100, 
                      10), 100)}%` 
                  }}
                ></div>
              </div>
            </div>
            
            <p className="mt-4 text-gray-600">
              {profitabilityIndicators.operatingProfitToRevenueRatio >= industryData.profitabilityIndicators.operatingProfitToRevenueRatio
                ? '영업이익률이 산업 평균보다 높습니다. 효율적인 비용 관리와 높은 부가가치 창출 능력을 갖추고 있습니다.'
                : '영업이익률이 산업 평균보다 낮습니다. 원가 절감과 부가가치 증대를 위한 전략이 필요합니다.'}
            </p>
          </div>
        </div>
      </div>
      
      <div className="border rounded-lg overflow-hidden shadow-sm">
        <div className="bg-gray-50 px-4 py-2 border-b">
          <h3 className="text-lg font-medium text-gray-900">수익성 지표 연도별 추이</h3>
        </div>
        <div className="p-4">
          {/* 연도별 추이 차트를 여기에 구현할 수 있습니다 */}
          <div className="border rounded p-4 text-center text-gray-500">
            수익성 지표 연도별 추이 차트가 여기에 표시됩니다.
          </div>
        </div>
      </div>
      
      <div className="border rounded-lg overflow-hidden shadow-sm">
        <div className="bg-gray-50 px-4 py-2 border-b">
          <h3 className="text-lg font-medium text-gray-900">수익성 관련 인사이트</h3>
        </div>
        <div className="p-4">
          <div className="p-4 bg-blue-50 rounded-lg">
            <h4 className="text-lg font-medium text-blue-900">수익성 분석</h4>
            <p className="mt-2 text-blue-700">
              {profitabilityIndicators.operatingProfitGrowthRate >= industryData.profitabilityIndicators.operatingProfitGrowthRate &&
               profitabilityIndicators.operatingProfitToRevenueRatio >= industryData.profitabilityIndicators.operatingProfitToRevenueRatio
                ? '귀사의 수익성 지표는 영업이익 증가율과 영업이익률 모두 산업 평균을 상회하고 있습니다. 효율적인 비용 관리와 높은 부가가치 창출 능력을 갖추고 있습니다.'
                : profitabilityIndicators.operatingProfitGrowthRate >= industryData.profitabilityIndicators.operatingProfitGrowthRate
                ? '귀사의 영업이익 증가율은 산업 평균을 상회하지만, 영업이익률은 산업 평균보다 낮습니다. 매출 성장에 따른 이익 증가가 이루어지고 있으나, 전반적인 수익성은 개선이 필요합니다.'
                : profitabilityIndicators.operatingProfitToRevenueRatio >= industryData.profitabilityIndicators.operatingProfitToRevenueRatio
                ? '귀사의 영업이익률은 산업 평균을 상회하지만, 영업이익 증가율은 산업 평균보다 낮습니다. 안정적인 수익 구조를 갖추고 있으나, 이익 성장을 위한 전략이 필요합니다.'
                : '귀사의 수익성 지표는 영업이익 증가율과 영업이익률 모두 산업 평균보다 낮습니다. 수익성 개선을 위한 원가 절감과 부가가치 증대 전략이 필요합니다.'}
            </p>
          </div>
          
          <div className="mt-4">
            <h4 className="font-medium text-gray-900">HR 관점에서의 시사점</h4>
            <p className="mt-2 text-gray-600">
              {profitabilityIndicators.operatingProfitToRevenueRatio >= industryData.profitabilityIndicators.operatingProfitToRevenueRatio
                ? '높은 영업이익률을 유지하기 위해 효율적인 인력 운영과 성과 중심의 조직 문화를 강화하세요. 핵심 인재를 유지하고 직원당 부가가치를 높이는 데 집중하는 것이 중요합니다.'
                : '수익성 개선을 위해 인력 생산성 향상과 핵심 역량 중심의 인력 배치가 필요합니다. 성과 연동형 보상체계를 도입하고 불필요한 인건비 지출을 최적화하세요.'}
            </p>
          </div>
        </div>
      </div>
    </div>
  );
};

// 안정성 탭 컴포넌트
const StabilityTab = ({ analysisData, industryData, year }) => {
  const { stabilityIndicators } = analysisData.financialAnalysis;
  
  return (
    <div className="space-y-6">
      <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div className="border rounded-lg overflow-hidden shadow-sm">
          <div className="bg-gray-50 px-4 py-2 border-b">
            <h3 className="text-lg font-medium text-gray-900">부채비율</h3>
          </div>
          <div className="p-4">
            <div className="flex justify-between items-center">
              <div className="text-gray-700">당사</div>
              <div className="text-2xl font-bold text-gray-900">{stabilityIndicators.debtRatio}%</div>
            </div>
            <div className="mt-2 flex justify-between items-center">
              <div className="text-gray-700">산업 평균</div>
              <div className="text-xl font-medium text-gray-600">{industryData.stabilityIndicators.debtRatio}%</div>
            </div>
            
            <div className="mt-4">
              <div className="h-4 bg-gray-200 rounded-full overflow-hidden">
                <div 
                  className={`h-full ${
                    stabilityIndicators.debtRatio <= industryData.stabilityIndicators.debtRatio
                      ? 'bg-green-500'
                      : 'bg-yellow-500'
                  }`} 
                  style={{ 
                    width: `${Math.min(Math.max(
                      (industryData.stabilityIndicators.debtRatio / Math.max(
                        stabilityIndicators.debtRatio, 
                        industryData.stabilityIndicators.debtRatio
                      )) * 100, 
                      10), 100)}%` 
                  }}
                ></div>
              </div>
            </div>
            
            <p className="mt-4 text-gray-600">
              {stabilityIndicators.debtRatio <= industryData.stabilityIndicators.debtRatio
                ? '부채비율이 산업 평균보다 낮습니다. 재무적으로 안정적인 상태이며 추가 자금 조달에 유리한 위치에 있습니다.'
                : '부채비율이 산업 평균보다 높습니다. 재무 안정성을 높이기 위한 부채 관리가 필요합니다.'}
            </p>
          </div>
        </div>
        
        <div className="border rounded-lg overflow-hidden shadow-sm">
          <div className="bg-gray-50 px-4 py-2 border-b">
            <h3 className="text-lg font-medium text-gray-900">유동비율</h3>
          </div>
          <div className="p-4">
            <div className="flex justify-between items-center">
              <div className="text-gray-700">당사</div>
              <div className="text-2xl font-bold text-gray-900">{stabilityIndicators.currentRatio}%</div>
            </div>
            <div className="mt-2 flex justify-between items-center">
              <div className="text-gray-700">산업 평균</div>
              <div className="text-xl font-medium text-gray-600">{industryData.stabilityIndicators.currentRatio}%</div>
            </div>
            
            <div className="mt-4">
              <div className="h-4 bg-gray-200 rounded-full overflow-hidden">
                <div 
                  className={`h-full ${
                    stabilityIndicators.currentRatio >= industryData.stabilityIndicators.currentRatio
                      ? 'bg-green-500'
                      : 'bg-yellow-500'
                  }`} 
                  style={{ 
                    width: `${Math.min(Math.max(
                      (stabilityIndicators.currentRatio / Math.max(
                        stabilityIndicators.currentRatio, 
                        industryData.stabilityIndicators.currentRatio
                      )) * 100, 
                      10), 100)}%` 
                  }}
                ></div>
              </div>
            </div>
            
            <p className="mt-4 text-gray-600">
              {stabilityIndicators.currentRatio >= industryData.stabilityIndicators.currentRatio
                ? '유동비율이 산업 평균보다 높습니다. 단기 지급 능력이 우수하며 안정적인 자금 운용이 이루어지고 있습니다.'
                : '유동비율이 산업 평균보다 낮습니다. 단기 유동성 관리에 주의가 필요합니다.'}
            </p>
          </div>
        </div>
      </div>
      
      <div className="border rounded-lg overflow-hidden shadow-sm">
        <div className="bg-gray-50 px-4 py-2 border-b">
          <h3 className="text-lg font-medium text-gray-900">안정성 지표 연도별 추이</h3>
        </div>
        <div className="p-4">
          {/* 연도별 추이 차트를 여기에 구현할 수 있습니다 */}
          <div className="border rounded p-4 text-center text-gray-500">
            안정성 지표 연도별 추이 차트가 여기에 표시됩니다.
          </div>
        </div>
      </div>
      
      <div className="border rounded-lg overflow-hidden shadow-sm">
        <div className="bg-gray-50 px-4 py-2 border-b">
          <h3 className="text-lg font-medium text-gray-900">안정성 관련 인사이트</h3>
        </div>
        <div className="p-4">
          <div className="p-4 bg-blue-50 rounded-lg">
            <h4 className="text-lg font-medium text-blue-900">안정성 분석</h4>
            <p className="mt-2 text-blue-700">
              {stabilityIndicators.debtRatio <= industryData.stabilityIndicators.debtRatio &&
               stabilityIndicators.currentRatio >= industryData.stabilityIndicators.currentRatio
                ? '귀사의 안정성 지표는 부채비율이 낮고 유동비율이 높아 산업 평균 대비 우수한 재무 안정성을 갖추고 있습니다. 이는 경기 변동에 대한 대응력이 높으며 장기적인 성장 투자에 유리한 조건입니다.'
                : stabilityIndicators.debtRatio <= industryData.stabilityIndicators.debtRatio
                ? '귀사의 부채비율은 산업 평균보다 낮지만, 유동비율은 산업 평균보다 낮습니다. 장기적인 재무 안정성은 우수하나 단기 유동성 관리가 필요합니다.'
                : stabilityIndicators.currentRatio >= industryData.stabilityIndicators.currentRatio
                ? '귀사의 유동비율은 산업 평균보다 높지만, 부채비율은 산업 평균보다 높습니다. 단기 지급 능력은 우수하나 장기적인 부채 관리가 필요합니다.'
                : '귀사의 안정성 지표는 부채비율이 높고 유동비율이 낮아 산업 평균 대비 재무 안정성이 취약합니다. 부채 감소와 유동성 확보를 위한 전략이 필요합니다.'}
            </p>
          </div>
          
          <div className="mt-4">
            <h4 className="font-medium text-gray-900">HR 관점에서의 시사점</h4>
            <p className="mt-2 text-gray-600">
              {stabilityIndicators.debtRatio <= industryData.stabilityIndicators.debtRatio &&
               stabilityIndicators.currentRatio >= industryData.stabilityIndicators.currentRatio
                ? '우수한 재무 안정성을 바탕으로 인재 확보 및 육성에 장기적인 투자가 가능합니다. 직원 성장 프로그램과 안정적인 보상체계를 통해 인적 자본을 강화하세요.'
                : '재무 안정성 개선을 위해 인건비 효율화와 인력 생산성 향상이 필요합니다. 핵심 역량 중심의 조직 재구성과 성과 연동형 보상체계를 검토하세요.'}
            </p>
          </div>
        </div>
      </div>
    </div>
  );
};

// 효율성 탭 컴포넌트
const EfficiencyTab = ({ analysisData, industryData, year }) => {
  const { efficiencyIndicators } = analysisData.financialAnalysis;
  
  return (
    <div className="space-y-6">
      <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div className="border rounded-lg overflow-hidden shadow-sm">
          <div className="bg-gray-50 px-4 py-2 border-b">
            <h3 className="text-lg font-medium text-gray-900">인당 매출액</h3>
          </div>
          <div className="p-4">
            <div className="flex justify-between items-center">
              <div className="text-gray-700">당사</div>
              <div className="text-2xl font-bold text-gray-900">{formatNumber(efficiencyIndicators.revenuePerEmployee)}원</div>
            </div>
            <div className="mt-2 flex justify-between items-center">
              <div className="text-gray-700">산업 평균</div>
              <div className="text-xl font-medium text-gray-600">{formatNumber(industryData.efficiencyIndicators.revenuePerEmployee)}원</div>
            </div>
            
            <div className="mt-4">
              <div className="h-4 bg-gray-200 rounded-full overflow-hidden">
                <div 
                  className={`h-full ${
                    efficiencyIndicators.revenuePerEmployee >= industryData.efficiencyIndicators.revenuePerEmployee
                      ? 'bg-green-500'
                      : 'bg-yellow-500'
                  }`} 
                  style={{ 
                    width: `${Math.min(Math.max(
                      (efficiencyIndicators.revenuePerEmployee / Math.max(
                        efficiencyIndicators.revenuePerEmployee, 
                        industryData.efficiencyIndicators.revenuePerEmployee
                      )) * 100, 
                      10), 100)}%` 
                  }}
                ></div>
              </div>
            </div>
            
            <p className="mt-4 text-gray-600">
              {efficiencyIndicators.revenuePerEmployee >= industryData.efficiencyIndicators.revenuePerEmployee
                ? '인당 매출액이 산업 평균보다 높습니다. 인력 효율성이 우수하며 생산성이 높은 조직 운영이 이루어지고 있습니다.'
                : '인당 매출액이 산업 평균보다 낮습니다. 인력 생산성 개선을 위한 전략이 필요합니다.'}
            </p>
          </div>
        </div>
        
        <div className="border rounded-lg overflow-hidden shadow-sm">
          <div className="bg-gray-50 px-4 py-2 border-b">
            <h3 className="text-lg font-medium text-gray-900">인당 영업이익</h3>
          </div>
          <div className="p-4">
            <div className="flex justify-between items-center">
              <div className="text-gray-700">당사</div>
              <div className="text-2xl font-bold text-gray-900">{formatNumber(efficiencyIndicators.operatingProfitPerEmployee)}원</div>
            </div>
            <div className="mt-2 flex justify-between items-center">
              <div className="text-gray-700">산업 평균</div>
              <div className="text-xl font-medium text-gray-600">{formatNumber(industryData.efficiencyIndicators.operatingProfitPerEmployee)}원</div>
            </div>
            
            <div className="mt-4">
              <div className="h-4 bg-gray-200 rounded-full overflow-hidden">
                <div 
                  className={`h-full ${
                    efficiencyIndicators.operatingProfitPerEmployee >= industryData.efficiencyIndicators.operatingProfitPerEmployee
                      ? 'bg-green-500'
                      : 'bg-yellow-500'
                  }`} 
                  style={{ 
                    width: `${Math.min(Math.max(
                      (efficiencyIndicators.operatingProfitPerEmployee / Math.max(
                        efficiencyIndicators.operatingProfitPerEmployee, 
                        industryData.efficiencyIndicators.operatingProfitPerEmployee
                      )) * 100, 
                      10), 100)}%` 
                  }}
                ></div>
              </div>
            </div>
            
            <p className="mt-4 text-gray-600">
              {efficiencyIndicators.operatingProfitPerEmployee >= industryData.efficiencyIndicators.operatingProfitPerEmployee
                ? '인당 영업이익이 산업 평균보다 높습니다. 인력 운영이 매우 효율적이며 수익성이 높은 비즈니스 모델을 갖추고 있습니다.'
                : '인당 영업이익이 산업 평균보다 낮습니다. 비용 구조 개선과 인력 생산성 향상이 필요합니다.'}
            </p>
          </div>
        </div>
      </div>
      
      <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div className="border rounded-lg overflow-hidden shadow-sm">
          <div className="bg-gray-50 px-4 py-2 border-b">
            <h3 className="text-lg font-medium text-gray-900">인당 노동생산성</h3>
          </div>
          <div className="p-4">
            <div className="flex justify-between items-center">
              <div className="text-gray-700">당사</div>
              <div className="text-2xl font-bold text-gray-900">{formatNumber(efficiencyIndicators.laborProductivityPerEmployee)}원</div>
            </div>
            <div className="mt-2 flex justify-between items-center">
              <div className="text-gray-700">산업 평균</div>
              <div className="text-xl font-medium text-gray-600">{formatNumber(industryData.efficiencyIndicators.laborProductivityPerEmployee)}원</div>
            </div>
            
            <div className="mt-4">
              <div className="h-4 bg-gray-200 rounded-full overflow-hidden">
                <div 
                  className={`h-full ${
                    efficiencyIndicators.laborProductivityPerEmployee >= industryData.efficiencyIndicators.laborProductivityPerEmployee
                      ? 'bg-green-500'
                      : 'bg-yellow-500'
                  }`} 
                  style={{ 
                    width: `${Math.min(Math.max(
                      (efficiencyIndicators.laborProductivityPerEmployee / Math.max(
                        efficiencyIndicators.laborProductivityPerEmployee, 
                        industryData.efficiencyIndicators.laborProductivityPerEmployee
                      )) * 100, 
                      10), 100)}%` 
                  }}
                ></div>
              </div>
            </div>
            
            <p className="mt-4 text-gray-600">
              {efficiencyIndicators.laborProductivityPerEmployee >= industryData.efficiencyIndicators.laborProductivityPerEmployee
                ? '인당 노동생산성이 산업 평균보다 높습니다. 부가가치 창출 능력이 뛰어나며 효율적인 인적 자원 활용이 이루어지고 있습니다.'
                : '인당 노동생산성이 산업 평균보다 낮습니다. 부가가치 증대와 인력 효율성 향상 전략이 필요합니다.'}
            </p>
          </div>
        </div>
        
        <div className="border rounded-lg overflow-hidden shadow-sm">
          <div className="bg-gray-50 px-4 py-2 border-b">
            <h3 className="text-lg font-medium text-gray-900">인당 자본생산성</h3>
          </div>
          <div className="p-4">
            <div className="flex justify-between items-center">
              // client/src/pages/Analysis/FinancialAnalysisDashboard.js
import React, { useState, useEffect } from 'react';
import { useParams, useNavigate } from 'react-router-dom';
import { toast } from 'react-toastify';
import axios from 'axios';

// 공통 컴포넌트
import Card from '../../components/common/Card';
import Button from '../../components/common/Button';
import Tabs from '../../components/common/Tabs';
import Spinner from '../../components/common/Spinner';

// 차트 컴포넌트
import LineChart from '../../components/charts/LineChart';
import BarChart from '../../components/charts/BarChart';
import ComparisonChart from '../../components/charts/ComparisonChart';
import GaugeChart from '../../components/charts/GaugeChart';

// 유틸리티
import { formatNumber } from '../../utils/numberFormat';

const FinancialAnalysisDashboard = () => {
  const { year } = useParams();
  const navigate = useNavigate();
  const [loading, setLoading] = useState(true);
  const [activeTab, setActiveTab] = useState('overview');
  const [analysisData, setAnalysisData] = useState(null);
  const [companyData, setCompanyData] = useState(null);
  const [availableYears, setAvailableYears] = useState([]);
  const [selectedYearForComparison, setSelectedYearForComparison] = useState(null);
  
  // 연도 옵션 생성 (현재 연도로부터 5년 전까지)
  const currentYear = new Date().getFullYear();
  const yearOptions = Array.from({ length: 5 }, (_, i) => ({
    value: (currentYear - 4 + i).toString(),
    label: (currentYear - 4 + i).toString()
  }));
  
  // 분석 데이터 불러오기
  useEffect(() => {
    const fetchAnalysisData = async () => {
      setLoading(true);
      
      try {
        const token = localStorage.getItem('token');
        if (!token) {
          navigate('/login');
          return;
        }
        
        // 기업 정보 조회
        const companyResponse = await axios.get('/api/company', {
          headers: { 'x-auth-token': token }
        });
        
        if (companyResponse.data) {
          setCompanyData(companyResponse.data);
        }
        
        // 모든 연도의 분석 결과 목록 조회
        const allYearsResponse = await axios.get('/api/analysis', {
          headers: { 'x-auth-token': token }
        });
        
        if (allYearsResponse.data && allYearsResponse.data.length > 0) {
          const years = allYearsResponse.data.map(item => item.year.toString());
          setAvailableYears(years);
          
          // 비교할 연도 기본값 설정 (현재 선택된 연도의 이전 연도)
          const yearsExceptCurrent = years.filter(y => y !== year);
          if (yearsExceptCurrent.length > 0) {
            // 가장 가까운 이전 연도 선택
            const prevYear = yearsExceptCurrent
              .filter(y => parseInt(y) < parseInt(year))
              .sort((a, b) => parseInt(b) - parseInt(a))[0];
            
            setSelectedYearForComparison(prevYear || yearsExceptCurrent[0]);
          }
        }
        
        // 선택한 연도의 분석 결과 조회
        const response = await axios.get(`/api/analysis/${year}`, {
          headers: { 'x-auth-token': token }
        });
        
        if (response.data) {
          setAnalysisData(response.data);
        } else {
          // 분석 결과가 없으면 분석 실행
          const analysisResponse = await axios.post(`/api/analysis/financial`, { year }, {
            headers: { 'x-auth-token': token }
          });
          
          if (analysisResponse.data) {
            setAnalysisData(analysisResponse.data);
            toast.success('재무 데이터 분석이 완료되었습니다.');
          }
        }
      } catch (error) {
        console.error('분석 데이터 불러오기 실패:', error);
        toast.error('분석 데이터를 불러올 수 없습니다. 재무 데이터를 먼저 입력해주세요.');
        navigate(`/financial/${year}`);
      } finally {
        setLoading(false);
      }
    };
    
    fetchAnalysisData();
  }, [year, navigate]);
  
  // 연도 선택 핸들러
  const handleYearChange = (e) => {
    navigate(`/financial/analysis/${e.target.value}`);
  };
  
  // 비교 연도 선택 핸들러
  const handleComparisonYearChange = (e) => {
    setSelectedYearForComparison(e.target.value);
  };
  
  // 탭 옵션
  const tabOptions = [
    { id: 'overview', label: '개요' },
    { id: 'growth', label: '성장성' },
    { id: 'profitability', label: '수익성' },
    { id: 'stability', label: '안정성' },
    { id: 'efficiency', label: '효율성' },
    { id: 'hrIndex', label: 'HR Index' },
    { id: 'comparison', label: '산업 비교' },
    { id: 'recommendation', label: '전략 추천' }
  ];
  
  // 보고서 생성 핸들러
  const handleGenerateReport = async () => {
    setLoading(true);
    
    try {
      const token = localStorage.getItem('token');
      if (!token) {
        navigate('/login');
        return;
      }
      
      const response = await axios.post(`/api/reports/financial`, { year }, {
        headers: { 'x-auth-token': token }
      });
      
      if (response.data && response.data.reportId) {
        window.location.href = `/api/reports/${response.data.reportId}?token=${token}`;
        toast.success('보고서가 생성되었습니다.');
      }
    } catch (error) {
      console.error('보고서 생성 실패:', error);
      toast.error('보고서 생성에 실패했습니다.');
    } finally {
      setLoading(false);
    }
  };
  
  // 다음 단계로 이동 핸들러
  const handleNextStep = () => {
    navigate(`/organization/${year}`);
  };
  
  if (loading) {
    return (
      <div className="flex justify-center items-center h-64">
        <Spinner size="lg" />
        <p className="ml-4 text-lg text-gray-600">분석 결과를 불러오는 중입니다...</p>
      </div>
    );
  }
  
  if (!analysisData) {
    return (
      <div className="bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-4">
        <div className="flex">
          <div className="flex-shrink-0">
            <svg className="h-5 w-5 text-yellow-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
              <path fillRule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clipRule="evenodd" />
            </svg>
          </div>
          <div className="ml-3">
            <p className="text-sm text-yellow-700">
              분석 결과가 없습니다. 먼저 재무 데이터를 입력해주세요.
            </p>
          </div>
        </div>
        <div className="mt-4">
          <Button
            variant="primary"
            onClick={() => navigate(`/financial/${year}`)}
          >
            재무 데이터 입력하기
          </Button>
        </div>
      </div>
    );
  }
  
  return (
    <div className="space-y-6">
      <Card>
        <div className="flex justify-between items-center mb-6">
          <div className="flex items-center space-x-4">
            <h2 className="text-xl font-bold text-gray-900">
              {companyData?.name || '기업'} {year}년 HR Index 분석
            </h2>
            <span className="px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800">
              {companyData?.industry || ''} / {companyData?.size || ''}
            </span>
          </div>
          
          <div className="flex items-center space-x-4">
            <select
              className="rounded-md border-gray-300 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"
              value={year}
              onChange={handleYearChange}
            >
              {yearOptions
                .filter(option => availableYears.includes(option.value) || option.value === year)
                .map(option => (
                  <option key={option.value} value={option.value}>
                    {option.label}년
                  </option>
                ))}
            </select>
            
            <Button
              variant="secondary"
              onClick={handleGenerateReport}
              disabled={loading}
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                className="h-5 w-5 mr-2"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  strokeLinecap="round"
                  strokeLinejoin="round"
                  strokeWidth={2}
                  d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"
                />
              </svg>
              보고서 다운로드
            </Button>
            
            <Button
              variant="primary"
              onClick={handleNextStep}
            >
              다음 단계: 조직진단
              <svg
                xmlns="http://www.w3.org/2000/svg"
                className="h-5 w-5 ml-2"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  strokeLinecap="round"
                  strokeLinejoin="round"
                  strokeWidth={2}
                  d="M14 5l7 7m0 0l-7 7m7-7H3"
                />
              </svg>
            </Button>
          </div>
        </div>
        
        <Tabs
          options={tabOptions}
          activeTab={activeTab}
          onChange={setActiveTab}
        />
        
        <div className="mt-6">
          {activeTab === 'overview' && (
            <OverviewTab
              analysisData={analysisData}
              year={year}
            />
          )}
          
          {activeTab === 'growth' && (
            <GrowthTab
              analysisData={analysisData}
              industryData={analysisData.industryComparison.industryAverage}
              year={year}
            />
          )}
          
          {activeTab === 'profitability' && (
            <ProfitabilityTab
              analysisData={analysisData}
              industryData={analysisData.industryComparison.industryAverage}
              year={year}
            />
          )}
          
          {activeTab === 'stability' && (
            <StabilityTab
              analysisData={analysisData}
              industryData={analysisData.industryComparison.industryAverage}
              year={year}
            />
          )}
          
          {activeTab === 'efficiency' && (
            <EfficiencyTab
              analysisData={analysisData}
              industryData={analysisData.industryComparison.industryAverage}
              year={year}
            />
          )}
          
          {activeTab === 'hrIndex' && (
            <HRIndexTab
              analysisData={analysisData}
              industryData={analysisData.industryComparison.industryAverage}
              year={year}
            />
          )}
          
          {activeTab === 'comparison' && (
            <IndustryComparisonTab
              analysisData={analysisData}
              industryData={analysisData.industryComparison.industryAverage}
              year={year}
            />
          )}
          
          {activeTab === 'recommendation' && (
            <RecommendationTab
              recommendations={analysisData.strategicRecommendations}
            />
          )}
        </div>
      </Card>
    </div>
  );
};

// 개요 탭 컴포넌트
const OverviewTab = ({ analysisData, year }) => {
  // 주요 지표 데이터 추출
  const {
    growthIndicators,
    profitabilityIndicators,
    stabilityIndicators,
    efficiencyIndicators,
    hrIndicators
  } = analysisData.financialAnalysis;
  
  const industryData = analysisData.industryComparison.industryAverage;
  const comparisonResults = analysisData.industryComparison.comparisonResults;
  
  // 카드 항목 데이터
  const overviewCards = [
    {
      title: '성장성',
      indicators: [
        {
          name: '매출액 증가율',
          value: `${growthIndicators.revenueGrowthRate}%`,
          industryValue: `${industryData.growthIndicators.revenueGrowthRate}%`,
          status: comparisonResults.growthIndicators.revenueGrowthRate.evaluation,
          description: '전년 대비 매출 증가율을 나타냅니다.'
        },
        {
          name: '총자산 증가율',
          value: `${growthIndicators.assetGrowthRate}%`,
          industryValue: `${industryData.growthIndicators.assetGrowthRate}%`,
          status: comparisonResults.growthIndicators.assetGrowthRate.evaluation,
          description: '전년 대비a 자산 증가율을 나타냅니다.'
        }
      ]
    },
    {
      title: '수익성',
      indicators: [
        {
          name: '영업이익 증가율',
          value: `${profitabilityIndicators.operatingProfitGrowthRate}%`,
          industryValue: `${industryData.profitabilityIndicators.operatingProfitGrowthRate}%`,
          status: comparisonResults.profitabilityIndicators.operatingProfitGrowthRate.evaluation,
          description: '전년 대비 영업이익 증가율을 나타냅니다.'
        },
        {
          name: '영업이익률',
          value: `${profitabilityIndicators.operatingProfitToRevenueRatio}%`,
          industryValue: `${industryData.profitabilityIndicators.operatingProfitToRevenueRatio}%`,
          status: comparisonResults.profitabilityIndicators.operatingProfitToRevenueRatio.evaluation,
          description: '매출액 대비 영업이익 비율을 나타냅니다.'
        }
      ]
    },
    {
      title: '안정성',
      indicators: [
        {
          name: '부채비율',
          value: `${stabilityIndicators.debtRatio}%`,
          industryValue: `${industryData.stabilityIndicators.debtRatio}%`,
          status: comparisonResults.stabilityIndicators.debtRatio.evaluation,
          description: '자본 대비 부채 비율을 나타냅니다.'
        },
        {
          name: '유동비율',
          value: `${stabilityIndicators.currentRatio}%`,
          industryValue: `${industryData.stabilityIndicators.currentRatio}%`,
          status: comparisonResults.stabilityIndicators.currentRatio.evaluation,
          description: '유동부채 대비 유동자산 비율을 나타냅니다.'
        }
      ]
    },
    {
      title: 'HR 지표',
      indicators: [
        {
          name: '노동소득분배율',
          value: `${hrIndicators.laborIncomeShareRate}%`,
          industryValue: `${industryData.hrIndicators.laborIncomeShareRate}%`,
          status: comparisonResults.hrIndicators.laborIncomeShareRate.evaluation,
          description: '부가가치 중 인건비가 차지하는 비율을 나타냅니다.'
        },
        {
          name: 'HCROI',
          value: hrIndicators.hcroi.toFixed(2),
          industryValue: industryData.hrIndicators.hcroi.toFixed(2),
          status: comparisonResults.hrIndicators.hcroi.evaluation,
          description: '인적자원 투자 대비 수익률을 나타냅니다.'
        }
      ]
    }
  ];
  
  return (
    <div className="space-y-6">
      <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
        {overviewCards.map((card, index) => (
          <div key={index} className="border rounded-lg overflow-hidden shadow-sm">
            <div className="bg-gray-50 px-4 py-2 border-b">
              <h3 className="text-lg font-medium text-gray-900">{card.title} 지표</h3>
            </div>
            <div className="p-4">
              {card.indicators.map((indicator, idx) => (
                <div key={idx} className={`${idx > 0 ? 'mt-4 pt-4 border-t' : ''}`}>
                  <div className="flex justify-between items-center">
                    <div className="text-gray-700">{indicator.name}</div>
                    <div className="text-xl font-bold text-gray-900">{indicator.value}</div>
                  </div>
                  <div className="mt-1 flex justify-between text-sm">
                    <div className="text-gray-500">산업 평균: {indicator.industryValue}</div>
                    <div className={`font-medium ${
                      indicator.status === '양호' || indicator.status === '효율적' 
                        ? 'text-green-600' 
                        : 'text-orange-600'
                    }`}>
                      {indicator.status}
                    </div>
                  </div>
                  <p className="mt-1 text-xs text-gray-500">{indicator.description}</p>
                </div>
              ))}
            </div>
          </div>
        ))}
      </div>
      
      <div className="border rounded-lg overflow-hidden shadow-sm">
        <div className="bg-gray-50 px-4 py-2 border-b">
          <h3 className="text-lg font-medium text-gray-900">주요 HR 지표 추이</h3>
        </div>
        <div className="p-4">
          {/* HR 지표 차트를 여기에 구현할 수 있습니다 */}
          <div className="border rounded p-4 text-center text-gray-500">
            HR 지표 추이 차트가 여기에 표시됩니다.
          </div>
        </div>
      </div>
      
      <div className="border rounded-lg overflow-hidden shadow-sm">
        <div className="bg-gray-50 px-4 py-2 border-b">
          <h3 className="text-lg font-medium text-gray-900">주요 인사이트</h3>
        </div>
        <div className="p-4">
          <ul className="space-y-2">
            {analysisData.strategicRecommendations.slice(0, 3).map((insight, index) => (
              <li key={index} className="flex items-start">
                <div className={`mt-0.5 mr-2 flex-shrink-0 w-6 h-6 rounded-full flex items-center justify-center ${
                  insight.priority === '높음' 
                    ? 'bg-red-100 text-red-600' 
                    : insight.priority === '중간'
                    ? 'bg-yellow-100 text-yellow-600'
                    : 'bg-blue-100 text-blue-600'
                }`}>
                  {index + 1}
                </div>
                <div>
                  <p className="font-medium text-gray-900">{insight.issue}</p>
                  <p className="text-gray-600 text-sm">{insight.recommendation}</p>
                </div>
              </li>
            ))}
          </ul>
          
          <div className="mt-4 text-center">
            <Button
              variant="text"
              onClick={() => document.getElementById('recommendation-tab').click()}
            >
              모든 추천 사항 보기
              <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5 ml-1" viewBox="0 0 20 20" fill="currentColor">
                <path fillRule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clipRule="evenodd" />
              </svg>
            </Button>
          </div>
        </div>
      </div>
    </div>
  );
};

// 성장성 탭 컴포넌트
const GrowthTab = ({ analysisData, industryData, year }) => {
  const { growthIndicators } = analysisData.financialAnalysis;
  
  return (
    <div className="space-y-6">
      <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div className="border rounded-lg overflow-hidden shadow-sm">
          <div className="bg-gray-50 px-4 py-2 border-b">
            <h3 className="text-lg font-medium text-gray-900">매출액 증가율</h3>
          </div>
          <div className="p-4">
            <div className="flex justify-between items-center">
              <div className="text-gray-700">당사</div>
              <div className="text-2xl font-bold text-gray-900">{growthIndicators.revenueGrowthRate}%</div>
            </div>
            <div className="mt-2 flex justify-between items-center">
              <div className="text-gray-700">산업 평균</div>
              <div className="text-xl font-medium text-gray-600">{industryData.growthIndicators.revenueGrowthRate}%</div>
            </div>
            
            <div className="mt-4">
              <div className="h-4 bg-gray-200 rounded-full overflow-hidden">
                <div 
                  className={`h-full ${
                    growthIndicators.revenueGrowthRate >= industryData.growthIndicators.revenueGrowthRate
                      ? 'bg-green-500'
                      : 'bg-yellow-500'
                  }`} 
                  style={{ 
                    width: `${Math.min(Math.max(
                      (growthIndicators.revenueGrowthRate / Math.max(
                        growthIndicators.revenueGrowthRate, 
                        industryData.growthIndicators.revenueGrowthRate
                      )) * 100, 
                      10), 100)}%` 
                  }}
                ></div>
              </div>
            </div>
            
            <p className="mt-4 text-gray-600">
              {growthIndicators.revenueGrowthRate >= industryData.growthIndicators.revenueGrowthRate
                ? '매출액 증가율이 산업 평균보다 높습니다. 기업이 성장하고 있으며 시장 점유율이 증가하고 있음을 의미합니다.'
                : '매출액 증가율이 산업 평균보다 낮습니다. 기업의 성장이 산업 전체보다 느리게 진행되고 있습니다.'}
            </p>
          </div>
        </div>
        
        <div className="border rounded-lg overflow-hidden shadow-sm">
          <div className="bg-gray-50 px-4 py-2 border-b">
            <h3 className="text-lg font-medium text-gray-900">총자산 증가율</h3>
          </div>
          <div className="p-4">
            <div className="flex justify-between items-center">
              <div className="text-gray-700">당사</div>
              <div className="text-2xl font-bold text-gray-900">{growthIndicators.assetGrowthRate}%</div>
            </div>
            <div className="mt-2 flex justify-between items-center">
              <div className="text-gray-700">산업 평균</div>
              <div className="text-xl font-medium text-gray-600">{industryData.growthIndicators.assetGrowthRate}%</div>
            </div>
            
            <div className="mt-4">
              <div className="h-4 bg-gray-200 rounded-full overflow-hidden">
                <div 
                  className={`h-full ${
                    growthIndicators.assetGrowthRate >= industryData.growthIndicators.assetGrowthRate
                      ? 'bg-green-500'
                      : 'bg-yellow-500'
                  }`} 
                  style={{ 
                    width: `${Math.min(Math.max(
                      (growthIndicators.assetGrowthRate / Math.max(
                        growthIndicators.assetGrowthRate, 
                        industryData.growthIndicators.assetGrowthRate
                      )) * 100, 
                      10), 100)}%` 
                  }}
                ></div>
              </div>
            </div>
            
            <p className="mt-4 text-gray-600">
              {growthIndicators.assetGrowthRate >= industryData.growthIndicators.assetGrowthRate
                ? '총자산 증가율이 산업 평균보다 높습니다. 기업이 설비 투자나 인수 합병 등을 통해 규모를 확장하고 있음을 의미합니다.'
                : '총자산 증가율이 산업 평균보다 낮습니다. 기업의 투자 속도가 산업 평균보다 느리게 진행되고 있습니다.'}
            </p>
          </div>
        </div>
      </div>
      
      <div className="border rounded-lg overflow-hidden shadow-sm">
        <div className="bg-gray-50 px-4 py-2 border-b">
          <h3 className="text-lg font-medium text-gray-900">성장성 지표 연도별 추이</h3>
        </div>
        <div className="p-4">
          {/* 연도별 추이 차트를 여기에 구현할 수 있습니다 */}
          <div className="border rounded p-4 text-center text-gray-500">
            성장성 지표 연도별 추이 차트가 여기에 표시됩니다.
          </div>
        </div>
      </div>
      
      <div className="border rounded-lg overflow-hidden shadow-sm">
        <div className="bg-gray-50 px-4 py-2 border-b">
          <h3 className="text-lg font-medium text-gray-900">성장성 관련 인사이트</h3>
        </div>
        <div className="p-4">
          <div className="p-4 bg-blue-50 rounded-lg">
            <h4 className="text-lg font-medium text-blue-900">성장성 분석</h4>
            <p className="mt-2 text-blue-700">
              {growthIndicators.revenueGrowthRate >= industryData.growthIndicators.revenueGrowthRate &&
               growthIndicators.assetGrowthRate >= industryData.growthIndicators.assetGrowthRate
                ? '귀사의 성장성 지표는 매출액 증가율과 총자산 증가율 모두 산업 평균을 상회하고 있습니다. 이는 기업이 시장에서 경쟁우위를 점하며 성장하고 있음을 나타냅니다.'
                : growthIndicators.revenueGrowthRate >= industryData.growthIndicators.revenueGrowthRate
                ? '귀사의 매출액 증가율은 // client/src/pages/Analysis/FinancialAnalysisDashboard.js
import React, { useState, useEffect } from 'react';
import { useParams, useNavigate } from 'react-router-dom';
import { toast } from 'react-toastify';
import axios from 'axios';

// 공통 컴포넌트
import Card from '../../components/common/Card';
import Button from '../../components/common/Button';
import Tabs from '../../components/common/Tabs';
import Spinner from '../../components/common/Spinner';

// 차트 컴포넌트
import LineChart from '../../components/charts/LineChart';
import BarChart from '../../components/charts/BarChart';
import ComparisonChart from '../../components/charts/ComparisonChart';
import GaugeChart from '../../components/charts/GaugeChart';

// 유틸리티
import { formatNumber } from '../../utils/numberFormat';

const FinancialAnalysisDashboard = () => {
  const { year } = useParams();
  const navigate = useNavigate();
  const [loading, setLoading] = useState(true);
  const [activeTab, setActiveTab] = useState('overview');
  const [analysisData, setAnalysisData] = useState(null);
  const [companyData, setCompanyData] = useState(null);
  const [availableYears, setAvailableYears] = useState([]);
  const [selectedYearForComparison, setSelectedYearForComparison] = useState(null);
  
  // 연도 옵션 생성 (현재 연도로부터 5년 전까지)
  const currentYear = new Date().getFullYear();
  const yearOptions = Array.from({ length: 5 }, (_, i) => ({
    value: (currentYear - 4 + i).toString(),
    label: (currentYear - 4 + i).toString()
  }));
  
  // 분석 데이터 불러오기
  useEffect(() => {
    const fetchAnalysisData = async () => {
      setLoading(true);
      
      try {
        const token = localStorage.getItem('token');
        if (!token) {
          navigate('/login');
          return;
        }
        
        // 기업 정보 조회
        const companyResponse = await axios.get('/api/company', {
          headers: { 'x-auth-token': token }
        });
        
        if (companyResponse.data) {
          setCompanyData(companyResponse.data);
        }
        
        // 모든 연도의 분석 결과 목록 조회
        const allYearsResponse = await axios.get('/api/analysis', {
          headers: { 'x-auth-token': token }
        });
        
        if (allYearsResponse.data && allYearsResponse.data.length > 0) {
          const years = allYearsResponse.data.map(item => item.year.toString());
          setAvailableYears(years);
          
          // 비교할 연도 기본값 설정 (현재 선택된 연도의 이전 연도)
          const yearsExceptCurrent = years.filter(y => y !== year);
          if (yearsExceptCurrent.length > 0) {
            // 가장 가까운 이전 연도 선택
            const prevYear = yearsExceptCurrent
              .filter(y => parseInt(y) < parseInt(year))
              .sort((a, b) => parseInt(b) - parseInt(a))[0];
            
            setSelectedYearForComparison(prevYear || yearsExceptCurrent[0]);
          }
        }
        
        // 선택한 연도의 분석 결과 조회
        const response = await axios.get(`/api/analysis/${year}`, {
          headers: { 'x-auth-token': token }
        });
        
        if (response.data) {
          setAnalysisData(response.data);
        } else {
          // 분석 결과가 없으면 분석 실행
          const analysisResponse = await axios.post(`/api/analysis/financial`, { year }, {
            headers: { 'x-auth-token': token }
          });
          
          if (analysisResponse.data) {
            setAnalysisData(analysisResponse.data);
            toast.success('재무 데이터 분석이 완료되었습니다.');
          }
        }
      } catch (error) {
        console.error('분석 데이터 불러오기 실패:', error);
        toast.error('분석 데이터를 불러올 수 없습니다. 재무 데이터를 먼저 입력해주세요.');
        navigate(`/financial/${year}`);
      } finally {
        setLoading(false);
      }
    };
    
    fetchAnalysisData();
  }, [year, navigate]);
  
  // 연도 선택 핸들러
  const handleYearChange = (e) => {
    navigate(`/financial/analysis/${e.target.value}`);
  };
  
  // 비교 연도 선택 핸들러
  const handleComparisonYearChange = (e) => {
    setSelectedYearForComparison(e.target.value);
  };
  
  // 탭 옵션
  const tabOptions = [
    { id: 'overview', label: '개요' },
    { id: 'growth', label: '성장성' },
    { id: 'profitability', label: '수익성' },
    { id: 'stability', label: '안정성' },
    { id: 'efficiency', label: '효율성' },
    { id: 'hrIndex', label: 'HR Index' },
    { id: 'comparison', label: '산업 비교' },
    { id: 'recommendation', label: '전략 추천' }
  ];
  
  // 보고서 생성 핸들러
  const handleGenerateReport = async () => {
    setLoading(true);
    
    try {
      const token = localStorage.getItem('token');
      if (!token) {
        navigate('/login');
        return;
      }
      
      const response = await axios.post(`/api/reports/financial`, { year }, {
        headers: { 'x-auth-token': token }
      });
      
      if (response.data && response.data.reportId) {
        window.location.href = `/api/reports/${response.data.reportId}?token=${token}`;
        toast.success('보고서가 생성되었습니다.');
      }
    } catch (error) {
      console.error('보고서 생성 실패:', error);
      toast.error('보고서 생성에 실패했습